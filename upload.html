<!DOCTYPE html>
<html>
    <body>
        <h2>Upload a Picture</h2>
        <!-- Only works in localhost for now, will be modified later -->
        <form action="{url}" method="post" enctype="multipart/form-data">
            <label for="file">Choose a picture:</label>
            <input type="file" id="file" name="file" accept="image/*"><br><br>
            <input type="hidden" name="filename" id="fileName">
            <script>
                function getOs() {
                    var userAgent = navigator.userAgent.toLowerCase();

                    console.log(userAgent);

                    var op = userAgent.indexOf("windows");
                    var index = userAgent.indexOf(")");

                    //Formatting the string and stuff, dont worry about this too much
                    if (op !== -1) {
                        var ostr = userAgent.substring(op, index);
                        var ostrfix = ostr.replace(/\s+/g, "-");
                        return ostrfix;
                    } else {
                        console.log("Unspecified or using unknown os");
                        return 2
                    }
                }

                // Get the actual date
                var date = new Date();

                var browser = getOs();
                if (browser == 2){
                    browser = 'unknown';
                }

                // Format the date to a string
                var fileName = browser +
                '_' + 
                date.getFullYear() +
                '-' + (date.getMonth() + 1) +
                '-' + date.getDate() +
                '_' + date.getHours() +
                '-' + date.getMinutes() +
                '-' + date.getSeconds() + '.jpg';
    
                //Assign the name to the input id that's going to be saved in the uploads folder
                document.getElementById('fileName').value = fileName;
            </script>
            <input type="submit" value="Upload File">
        </form>
    </body>
</html>